{"ast":null,"code":"import _slicedToArray from\"J:/ali/Sabzlearn/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Table from'../../../Components/AdminPanel/Table/Table';import swal from'sweetalert';import\"./AdminContact.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function AdminContact(){var localStorageData=JSON.parse(localStorage.getItem(\"user\"));var _useState=useState([]),_useState2=_slicedToArray(_useState,2),contacts=_useState2[0],setContacts=_useState2[1];useEffect(function(){getAllContacts();},[]);function getAllContacts(){fetch(\"http://localhost:4000/v1/contact\").then(function(res){return res.json();}).then(function(allContants){console.log(allContants);setContacts(allContants);});}var showContactBody=function showContactBody(body){swal({title:body,buttons:\"ok\"});};var answerContact=function answerContact(ContactEmail){swal({title:\"پیغام خود را وارد کنید\",content:\"input\",buttons:\"ارسال ایمیل\"}).then(function(result){var answerInfo={email:ContactEmail,answer:result};fetch(\"http://localhost:4000/v1/contact/answer\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(localStorageData)},body:JSON.stringify(answerInfo)}).then(function(res){if(res.ok){console.log(res);}}).then(function(result){swal({title:\"ایمیل با موفقیت ارسال شد\",icon:\"success\",buttons:\"ok\"});getAllContacts();});});};var removeContact=function removeContact(ContactID){swal({title:\"ایا از  حذف اطمینان دارید؟\",icon:\"warning\",buttons:[\"نه\",\"اره\"]}).then(function(result){if(result){fetch(\"http://localhost:4000/v1/contact/\".concat(ContactID),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(localStorageData)}}).then(function(res){if(res.ok){console.log(res);}}).then(function(result){swal({title:\"با موفقیت پیغام حذف شد\",icon:\"success\",buttons:\"ok\"}).then(function(){getAllContacts();});});}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Table,{title:\" \\u067E\\u06CC\\u063A\\u0627\\u0645 \\u0647\\u0627\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0634\\u0646\\u0627\\u0633\\u0647\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u06CC\\u0645\\u06CC\\u0644 \"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062A\\u0645\\u0627\\u0633\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0645\\u0634\\u0627\\u0647\\u062F\\u0647\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u067E\\u0627\\u0633\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u062D\\u0630\\u0641\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:contacts.map(function(contact,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:contact.answer===1?\"answer\":\"no-answer\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:contact.name}),/*#__PURE__*/_jsx(\"td\",{children:contact.email}),/*#__PURE__*/_jsx(\"td\",{children:contact.phone}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-primary edit-btn\",onClick:function onClick(){return showContactBody(contact.body);},children:\"\\u0645\\u0634\\u0627\\u0647\\u062F\\u0647\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-primary edit-btn\",onClick:function onClick(){return answerContact(contact.email);},children:\"\\u067E\\u0627\\u0633\\u062E\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-danger delete-btn\",onClick:function onClick(){return removeContact(contact._id);},children:\"\\u062D\\u0630\\u0641\"})})]});})})]})})});}","map":{"version":3,"names":["React","useEffect","useState","Table","swal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminContact","localStorageData","JSON","parse","localStorage","getItem","_useState","_useState2","_slicedToArray","contacts","setContacts","getAllContacts","fetch","then","res","json","allContants","console","log","showContactBody","body","title","buttons","answerContact","ContactEmail","content","result","answerInfo","email","answer","method","headers","concat","stringify","ok","icon","removeContact","ContactID","children","class","map","contact","index","className","name","phone","type","onClick","_id"],"sources":["J:/ali/Sabzlearn/frontend/src/Pages/AdminPanel/AdminContact/AdminContact.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Table from '../../../Components/AdminPanel/Table/Table'\r\nimport swal from 'sweetalert'\r\nimport \"./AdminContact.css\"\r\nexport default function AdminContact() {\r\n    const localStorageData = JSON.parse(localStorage.getItem(\"user\"))\r\n    const [contacts, setContacts] = useState([])\r\n    useEffect(() => {\r\n        getAllContacts()\r\n    }, [])\r\n    function getAllContacts() {\r\n        fetch(\"http://localhost:4000/v1/contact\")\r\n            .then(res => res.json())\r\n            .then(allContants => {\r\n                console.log(allContants\r\n                );\r\n                setContacts(allContants)\r\n            })\r\n    }\r\n    const showContactBody = (body) => {\r\n        swal({\r\n            title: body,\r\n            buttons: \"ok\"\r\n        })\r\n    }\r\n    const answerContact = (ContactEmail) => {\r\n        swal({\r\n            title: \"پیغام خود را وارد کنید\",\r\n            content: \"input\",\r\n            buttons: \"ارسال ایمیل\"\r\n\r\n        })\r\n            .then((result) => {\r\n                const answerInfo = {\r\n                    email: ContactEmail,\r\n                    answer: result\r\n                }\r\n                fetch(\"http://localhost:4000/v1/contact/answer\", {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        \"Authorization\": `Bearer ${localStorageData}`\r\n                    }\r\n                    , body: JSON.stringify(answerInfo)\r\n                })\r\n                    .then(res => {\r\n                        if (res.ok) {\r\n                            console.log(res);\r\n                        }\r\n                    })\r\n                    .then(result => {\r\n                        swal({\r\n                            title: \"ایمیل با موفقیت ارسال شد\"\r\n                            , icon: \"success\",\r\n                            buttons: \"ok\"\r\n                        })\r\n                        getAllContacts()\r\n                    })\r\n\r\n            })\r\n    }\r\n    const removeContact = (ContactID) => {\r\n        swal({\r\n            title: \"ایا از  حذف اطمینان دارید؟\"\r\n            , icon: \"warning\",\r\n            buttons: [\"نه\", \"اره\"]\r\n        })\r\n            .then(result => {\r\n                if (result) {\r\n                    fetch(`http://localhost:4000/v1/contact/${ContactID}`, {\r\n                        method: \"DELETE\",\r\n                        headers: {\r\n                            \"Authorization\": `Bearer ${localStorageData}`\r\n                        }\r\n                    })\r\n                        .then(res => {\r\n                            if (res.ok) {\r\n                                console.log(res);\r\n                            }\r\n\r\n                        })\r\n                        .then(result => {\r\n                            swal({\r\n                                title: \"با موفقیت پیغام حذف شد\"\r\n                                , icon: \"success\"\r\n                                , buttons: \"ok\"\r\n                            })\r\n                                .then(() => {\r\n                                    getAllContacts()\r\n                                })\r\n                        })\r\n                }\r\n            })\r\n    }\r\n    return (\r\n        <>\r\n\r\n            <Table title=\" پیغام ها\">\r\n                <table class=\"table\">\r\n                    <thead>\r\n\r\n                        <tr>\r\n                            <th >شناسه</th>\r\n                            <th>عنوان</th>\r\n                            <th>ایمیل </th>\r\n                            <th>شماره تماس</th>\r\n                            <th>مشاهده</th>\r\n                            <th>پاسخ</th>\r\n                            <th>حذف</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n\r\n\r\n                        {contacts.map((contact, index) => (\r\n                            <tr>\r\n                                <td className={contact.answer === 1 ? \"answer\" : \"no-answer\"}>{index + 1}</td>\r\n                                <td>{contact.name}</td>\r\n                                <td>{contact.email}</td>\r\n                                <td>{contact.phone}</td>\r\n\r\n                                <td>\r\n                                    <button type=\"button\" class=\"btn btn-primary edit-btn\" onClick={() => showContactBody(contact.body)}>\r\n                                        مشاهده\r\n                                    </button>\r\n                                </td>\r\n                                <td>\r\n                                    <button type=\"button\" class=\"btn btn-primary edit-btn\" onClick={() => answerContact(contact.email)}>\r\n                                        پاسخ\r\n                                    </button>\r\n                                </td>\r\n                                <td>\r\n                                    <button type=\"button\" class=\"btn btn-danger delete-btn\" onClick={() => removeContact(contact._id)} >\r\n                                        حذف\r\n                                    </button>\r\n                                </td>\r\n\r\n                            </tr>\r\n                        ))}\r\n\r\n\r\n\r\n\r\n\r\n                    </tbody>\r\n                </table>\r\n\r\n            </Table>\r\n        </>\r\n    )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}